server:
  port: 5006

spring:
  application:
    name: ehr-service
  datasource:
    url: ${EHR_DB_URL:jdbc:mysql://localhost:3309/ehr_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC}
    username: ${EHR_DB_USERNAME:ehr_user}
    password: ${EHR_DB_PASSWORD:ehr_pass}
  jpa:
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
    open-in-view: false
  flyway:
    enabled: false
  servlet:
    multipart:
      max-file-size: ${EHR_MAX_UPLOAD_SIZE:10MB}
      max-request-size: ${EHR_MAX_UPLOAD_SIZE:10MB}

security:
  jwt:
    issuer: ${EHR_JWT_ISSUER:identity-service}
    audience: ${EHR_JWT_AUDIENCE:your-audience}
    secret: ${EHR_JWT_SECRET:CHANGE_THIS_TO_A_LONG_RANDOM_SECRET_AT_LEAST_32_CHARS}
    clockSkewSeconds: ${EHR_JWT_CLOCK_SKEW:30}

internal:
  service:
    token: ${INTERNAL_SERVICE_TOKEN:ehr}

storage:
  baseDir: ${EHR_STORAGE_BASEDIR:./ehr-storage}

crypto:
  masterKeyBase64: ${EHR_MASTER_KEY_BASE64:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=}
  keyId: ${EHR_MASTER_KEY_ID:v1}

chat:
  questions:
    - id: medication-summary
      text: "Summarize the patient's current medications and any potential concerns."
    - id: allergy-risk
      text: "Based on allergies and conditions, highlight any clinical risks."
    - id: vitals-trend
      text: "Summarize recent vitals and flag anything outside normal ranges."

gemini:
  apiKey: ${GEMINI_API_KEY:AIzaSyDodNVOcjRRFKj2zPaeTuNyMX_oseKUiIc}
  model: ${GEMINI_MODEL:gen-lang-client-0159223267}
  endpoint: ${GEMINI_ENDPOINT:https://generativelanguage.googleapis.com/v1beta/models}

rateLimit:
  export:
    tokensPerMinute: ${EHR_EXPORT_TOKENS_PER_MINUTE:5}
    bucketCapacity: ${EHR_EXPORT_BUCKET_CAPACITY:5}

logging:
  level:
    org.springframework.web: INFO

springdoc:
  swagger-ui:
    path: /swagger-ui.html
  api-docs:
    path: /v3/api-docs
